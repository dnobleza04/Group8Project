<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Admin Dashboard</title>

  <style>

    /* simple top bar (NO logo) */
     .topbar{
      background: rgba(17,24,39,0.9);
      border-bottom: 1px solid #2b364a;
      padding: 14px 16px;
    }
    .topbarInner{
      max-width:1100px;
      margin:0 auto;
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:14px;
      flex-wrap:wrap;
    }
    .brand{
      font-weight:800;
      font-size: 22px;
      letter-spacing:.2px;
    }
    .nav{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      font-size:14px;
    }
    .nav a{
      text-decoration:none;
      color:#b7c0d1;
      padding: 6px 10px;
      border-radius: 10px;
      border: 1px solid transparent;
    }
    .nav a.active{
      color:#fff;
      background: rgba(96,165,250,0.12);
      border: 1px solid rgba(96,165,250,0.25);
    }

    .container{
      max-width:1100px;
      margin: 22px auto;
      padding: 0 16px;
    }

    .pageTitle{
      font-size:34px;
      margin: 6px 0 8px 0;
    }
    .subtext{
      margin:0 0 16px 0;
      color:#b7c0d1;
      font-size:14px;
      line-height:1.4;
    }

    .grid{
      display:grid;
      grid-template-columns: 1.2fr 0.8fr;
      gap:14px;
      align-items:start;
    }
    @media (max-width: 950px){
      .grid{ grid-template-columns: 1fr; }
    }

    .card{
      background:#111827;
      border: 1px solid #2b364a;
      border-radius: 16px;
      padding: 16px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.25);
    }
    .cardHeader{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      margin-bottom:10px;
      flex-wrap:wrap;
    }
    .cardHeader h2{
      margin:0;
      font-size:18px;
    }
    .pill{
      font-size:12px;
      color:#b7c0d1;
      background: rgba(255,255,255,0.04);
      border: 1px solid #2b364a;
      padding: 4px 10px;
      border-radius: 999px;
    }

    .row{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:12px;
      padding: 12px;
      background: rgba(255,255,255,0.03);
      border: 1px solid #2b364a;
      border-radius: 14px;
      margin-bottom: 10px;
    }
    .rowLeft{ flex:1; }
    .ideaText{
      margin:0;
      font-size:14px;
      line-height:1.35;
    }
    .meta{
      margin-top:6px;
      font-size:12px;
      color:#b7c0d1;
    }

      button{
      border:none;
      padding: 10px 14px;
      border-radius: 12px;
      font-weight:700;
      cursor:pointer;
      white-space:nowrap;
    } 
    .btnRemove{
      background:#ef4444;
      color:#0b0f19;
    }
    .btnRetire{
      background:#f59e0b;
      color:#0b0f19;
    }
    button:disabled{
      opacity:.55;
      cursor:not-allowed;
    }

    .badge{
      display:inline-block;
      margin-left:10px;
      font-size:12px;
      font-weight:700;
      padding: 3px 10px;
      border-radius: 999px;
      border: 1px solid #2b364a;
      color:#b7c0d1;
      background: rgba(255,255,255,0.03);
    }

    .empty{
      padding: 12px;
      border: 1px dashed #2b364a;
      border-radius: 14px;
      color:#b7c0d1;
      font-size:13px;
      background: rgba(255,255,255,0.02);
    } 


    /* new  */

* { box-sizing: border-box; }

:root{
  --bg1:#f6f8fc;
  --bg2:#eef2ff;
  --surface:#ffffff;
  --text:#0f172a;
  --muted:#64748b;
  --border:#e2e8f0;

  --primary:#4f46e5;   
  --primary2:#2563eb;     
  --shadow: 0 18px 45px rgba(15, 23, 42, 0.10);
  --shadow2: 0 10px 22px rgba(15, 23, 42, 0.08);
}

/* Page background */
body{
  margin: 0;
  min-height: 100vh;
  font-family: "Segoe UI", Roboto, Arial, sans-serif;
  color: var(--text);

  background:
    radial-gradient(1100px 600px at 15% 15%, var(--bg2), transparent 60%),
    radial-gradient(900px 500px at 85% 25%, #e0f2fe, transparent 55%),
    linear-gradient(180deg, var(--bg1), #ffffff);
}

/* Topbar */
.topbar{
  position: sticky;
  top: 0;
  z-index: 50;

  background: rgba(255,255,255,0.78);
  backdrop-filter: blur(10px);
  border-bottom: 1px solid var(--border);
}

.topbarInner{
  max-width: 1120px;
  margin: 0 auto;
  padding: 14px 20px;

  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 16px;
}

.brand{
  font-weight: 800;
  letter-spacing: 0.2px;
  font-size: 20px;
}

.nav{
  display: flex;
  gap: 6px;
  align-items: center;
}

.nav a{
  text-decoration: none;
  color: var(--muted);
  font-weight: 700;
  padding: 8px 12px;
  border-radius: 12px;
  transition: 0.2s ease;
  border: 1px solid transparent;
}

.nav a:hover{
  color: var(--text);
  background: rgba(79,70,229,0.08);
}

.nav a.active{
  color: var(--primary);
  background: rgba(79,70,229,0.10);
  border-color: rgba(79,70,229,0.20);
}

   /* Main container */

.container{
  max-width: 1120px;
  margin: 0 auto;
  padding: 26px 20px 60px;
}

.pageTitle{
  font-size: 44px;
  font-weight: 800;
  letter-spacing: -0.6px;
  margin: 6px 0 6px;
}

.subtext{
  margin: 0 0 22px;
  color: var(--muted);
  line-height: 1.55;
  max-width: 820px;
}

/* Grid + Cards */
.grid{
  display: grid;
  grid-template-columns: 1.35fr 0.9fr;
  gap: 20px;
  align-items: start;
}

@media (max-width: 980px){
  .grid{ grid-template-columns: 1fr; }
  .pageTitle{ font-size: 36px; }
}

.card{
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 18px;
  box-shadow: var(--shadow2);
  overflow: hidden;
}

.cardHeader{
  padding: 16px 18px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;

  background: linear-gradient(180deg, rgba(79,70,229,0.06), transparent);
  border-bottom: 1px solid var(--border);
}

.cardHeader h2{
  margin: 0;
  font-size: 20px;
  letter-spacing: -0.2px;
}

.pill{
  display: inline-flex;
  align-items: center;

  font-size: 12.5px;
  font-weight: 800;
  color: var(--muted);

  padding: 7px 10px;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: rgba(255,255,255,0.85);
  white-space: nowrap;
}

/* List containers */
#ideasList,
#promptList{
  padding: 12px;
}


#ideasList .row,
#ideasList .item,
#ideasList .listItem,
#ideasList .ideaItem,
#promptList .row,
#promptList .item,
#promptList .listItem,
#promptList .promptItem{
  padding: 14px;
  margin: 10px 4px;

  border: 1px solid var(--border);
  border-radius: 14px;
  background: #fff;

  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;

  transition: 0.2s ease;
}

#ideasList .row:hover,
#ideasList .item:hover,
#ideasList .listItem:hover,
#ideasList .ideaItem:hover,
#promptList .row:hover,
#promptList .item:hover,
#promptList .listItem:hover,
#promptList .promptItem:hover{
  transform: translateY(-1px);
  box-shadow: 0 10px 20px rgba(15,23,42,0.08);
}


#ideasList h3, #promptList h3{
  margin: 0 0 6px;
  font-size: 15px;
}

#ideasList small, #promptList small,
#ideasList .meta, #promptList .meta{
  color: var(--muted);
  font-size: 13px;
}

button{
  border: 1px solid transparent;
  background: #fff;
  color: var(--text);
  font-weight: 800;
  padding: 10px 14px;
  border-radius: 12px;
  cursor: pointer;
  transition: 0.2s ease;
}

/* hover */
button:hover{
  transform: translateY(-1px);
  box-shadow: 0 10px 18px rgba(15,23,42,0.10);
}

/* Remove (danger) */
button.remove,
button[data-action="remove"]{
  background: rgba(239,68,68,0.10);
  border-color: rgba(239,68,68,0.22);
  color: #b91c1c;
}
button.remove:hover,
button[data-action="remove"]:hover{
  background: rgba(239,68,68,0.14);
}

/* Retire (warning) */
button.retire,
button[data-action="retire"]{
  background: rgba(245,158,11,0.14);
  border-color: rgba(245,158,11,0.25);
  color: #92400e;
}
button.retire:hover,
button[data-action="retire"]:hover{
  background: rgba(245,158,11,0.18);
}

button.primary{
  color: #fff;
  background: linear-gradient(135deg, var(--primary), var(--primary2));
  box-shadow: 0 12px 22px rgba(79,70,229,0.18);
}
button.primary:hover{
  box-shadow: 0 16px 30px rgba(79,70,229,0.22);
}

/* reduce motion */
@media (prefers-reduced-motion: reduce){
  * { transition: none !important; }
  button:hover { transform: none; }
  #ideasList .row:hover, #promptList .row:hover { transform: none; }
}


/* Manager Analytic Dashboard */


.manager-analytics{
  width: 100%;
  background: #ffffff;
  border: 1px solid var(--border, #e2e8f0);
  border-radius: 18px;
  box-shadow: 0 10px 22px rgba(15, 23, 42, 0.08);
  overflow: hidden;
}

/* Header */
.ma-title{
  margin: 0;
  padding: 16px 18px;
  font-size: 18px;
  font-weight: 800;
  color: var(--text, #0f172a);

  background: linear-gradient(180deg, rgba(37, 99, 235, 0.10), transparent);
  border-bottom: 1px solid var(--border, #e2e8f0);
}

/* Blocks inside */
.ma-block{
  padding: 14px 18px;
  border-bottom: 1px solid var(--border, #e2e8f0);
}

.ma-block:last-child{
  border-bottom: none;
}

/* Subtitles */
.ma-subtitle{
  font-size: 14px;
  font-weight: 800;
  color: var(--text, #0f172a);
  margin-bottom: 10px;
}

/* Label + Value row */
.ma-label-row{
  display: flex;
  align-items: baseline;
  justify-content: space-between;
  gap: 12px;
  margin: 6px 0;
}

.ma-label{
  color: var(--muted, #64748b);
  font-size: 13px;
  font-weight: 700;
}

.ma-value{
  color: var(--text, #0f172a);
  font-size: 13px;
  font-weight: 800;
}

/* Progress bar container */
.ma-progress{
  width: 100%;
  height: 12px;
  border-radius: 999px;
  background: #e9eef7;
  border: 1px solid rgba(15,23,42,0.08);
  overflow: hidden;
  margin-top: 8px;
}

/* Default fill */
.ma-progress-fill{
  height: 100%;
  width: 0%;
  border-radius: 999px;
  background: linear-gradient(90deg, #2563eb, #60a5fa);
  transition: width 0.35s ease;
}

/* Different bar colors */
#reqAnsweredFill{
  background: linear-gradient(90deg, #16a34a, #86efac);  
}

#stillNeedFill{
  background: linear-gradient(90deg, #f59e0b, #fde68a); 
}

#maCompletionFill{
  background: linear-gradient(90deg, #2563eb, #93c5fd);  
}

/* Top concern block */
.ma-top-concern{
  background: rgba(37, 99, 235, 0.05);
}

/* Trending topics list */
.ma-topics{
  list-style: none;
  padding: 0;
  margin: 10px 0 0;
  display: grid;
  gap: 10px;
}

.ma-topics li{
  display: grid;
  grid-template-columns: 1fr auto;
  align-items: center;
  gap: 12px;

  padding: 10px 12px;
  border: 1px solid var(--border, #e2e8f0);
  border-radius: 14px;
  background: #ffffff;
}

.ma-topics .topic-name{
  font-weight: 800;
  font-size: 13px;
  color: var(--text, #0f172a);
}

.ma-topics .topic-pct{
  font-weight: 900;
  font-size: 13px;
  color: var(--muted, #64748b);
}

/* Small bar inside a topic row */
.ma-topics .topic-bar{
  grid-column: 1 / -1;
  height: 10px;
  border-radius: 999px;
  background: #e9eef7;
  overflow: hidden;
  border: 1px solid rgba(15,23,42,0.08);
}

.ma-topics .topic-bar > span{
  display: block;
  height: 100%;
  width: 0%;
  border-radius: 999px;
  background: linear-gradient(90deg, #2563eb, #60a5fa);
}

/* smaller screens */
@media (max-width: 980px){
  .manager-analytics{ border-radius: 16px; }
  .ma-title{ font-size: 17px; }
}

/* space between the cards */
.manager-analytics {
  margin-bottom: 40px;
}

  </style>
</head>

<body>
  <div class="topbar">
    <div class="topbarInner">
      <div class="brand">Employee Feedback</div>
      <div class="nav">
        <a class="active" href="#">Admin</a>
        <a href="#">Employee</a>
        <a href="#">Submit Idea</a>
        <a href="#">Help</a>
      </div>
    </div>
  </div>

  <div class="container">
    <div class="pageTitle">Admin Dashboard</div>
    <p class="subtext">
      View ideas by support level, remove inappropriate ideas, and retire prompts to prevent repeated questions.
    </p>


     <!-- Manager Analytics Dashboard -->
  <section class="manager-analytics" aria-label="Manager Analytics Dashboard">
  <h3 class="ma-title">Manager Analytics Dashboard</h3>

  <div class="ma-block">
    <div class="ma-label-row">
      <span id="maCompletionText" class="ma-value" style="display:none;"></span>
    </div>

  <div class="ma-block">
  <div class="ma-subtitle">Participation</div>

  <!-- Required Answered -->
  <div class="ma-label-row">
    <span class="ma-label">Employee Answered (Required):</span>
    <span class="ma-value"><span id="reqAnsweredNum">0</span> / 50</span>
  </div>
  <div class="ma-progress" role="progressbar" aria-valuemin="0" aria-valuemax="50" aria-valuenow="0">
    <div class="ma-progress-fill" id="reqAnsweredFill" style="width:0%"></div>
  </div>

  <!-- Still Need -->
  <div class="ma-label-row" style="margin-top:10px;">
    <span class="ma-label">Employee that need to answer:</span>
    <span class="ma-value"><span id="stillNeedNum">0</span> / 50</span>
  </div>
  <div class="ma-progress" role="progressbar" aria-valuemin="0" aria-valuemax="50" aria-valuenow="0">
    <div class="ma-progress-fill" id="stillNeedFill" style="width:0%"></div>
  </div>

  <!-- Total Activity -->
  <div class="ma-label-row" style="margin-top:10px;">
    <span class="ma-label">Total activity:</span>
    <span class="ma-value" id="totalActivityNum">0</span>
  </div>
</div>

<div class="ma-progress" role="progressbar"
     aria-valuemin="0" aria-valuemax="100" aria-valuenow="0"
     aria-label="Admin Questions Completion">
  <div class="ma-progress-fill" id="maCompletionFill" style="width:0%"></div>
</div>

  <div class="ma-block ma-top-concern">
    <div class="ma-label-row">
      <span class="ma-label">Top Concern:</span>
      <span class="ma-icons" aria-hidden="true">
      </span>
    </div>
  </div>

  <div class="ma-block">
    <div class="ma-subtitle">Trending Employee Topics</div>

    <ul class="ma-topics" id="maTopicsList">
      <!-- populated by JS -->
    </ul>

  </div>
</section>

    <div class="grid">
      <div class="card">
        <div class="cardHeader">
          <h2>Ideas</h2>
          <span class="pill">Sorted MOST → LEAST liked</span>
        </div>
        <div id="ideasList"></div>
      </div>

      <div class="card">
        <div class="cardHeader">
          <h2>Prompts</h2>
          <span class="pill">Retire when done</span>
        </div>
        <div id="promptList"></div>
      </div>
    </div>
  </div>

  <script>
    // Storage keys
    const PROMPTS_KEY = "swipe_prompts";

    if (!localStorage.getItem(PROMPTS_KEY)) {
      localStorage.setItem(PROMPTS_KEY, JSON.stringify([
        { id: 1, text: "The tools I use are up to date for my job.", status: "active", count: 0, threshold: 5 },
        { id: 2, text: "Team communication is clear and consistent.", status: "active", count: 0, threshold: 5 },
        { id: 3, text: "Meetings are productive and action-oriented.", status: "active", count: 0, threshold: 5 }
      ]));
    }

    // Demo ideas
    let ideas = [
      { id: 1, text: "Standardize weekly check-ins.", likes: 5, dislikes: 8 },
      { id: 2, text: "Shared FAQ page.", likes: 12, dislikes: 2 },
      { id: 3, text: "More training resources.", likes: 3, dislikes: 6 }
    ];

    function escapeHtml(str){
      return str.replace(/[&<>"']/g, (m) => ({
        "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"
      }[m]));
    }

    function supportPercent(i){
      const total = i.likes + i.dislikes;
      if (total === 0) return 0;
      return (i.likes / total) * 100;
    }

    function renderIdeas(){
      const list = document.getElementById("ideasList");
      list.innerHTML = "";

      // Most -> Least liked
      const sorted = [...ideas].sort((a,b) => supportPercent(b) - supportPercent(a));

      if(sorted.length === 0){
        list.innerHTML = `<div class="empty">No ideas to review right now.</div>`;
        return;
      }

      sorted.forEach(i => {
        const row = document.createElement("div");
        row.className = "row";
        row.innerHTML = `
          <div class="rowLeft">
            <p class="ideaText">${escapeHtml(i.text)}</p>
            <div class="meta">
              Support: ${supportPercent(i).toFixed(1)}% • Likes: ${i.likes} • Dislikes: ${i.dislikes}
            </div>
          </div>
          <button class="btnRemove" onclick="removeIdea(${i.id})">Remove</button>
        `;
        list.appendChild(row);
      });
    }

    function removeIdea(id){
      if(!confirm("Remove this idea?")) return;
      ideas = ideas.filter(i => i.id !== id);
      renderIdeas();
    }

    function renderPrompts(){
      const list = document.getElementById("promptList");
      list.innerHTML = "";
      const prompts = JSON.parse(localStorage.getItem(PROMPTS_KEY) || "[]");

      if(prompts.length === 0){
        list.innerHTML = `<div class="empty">No prompts found.</div>`;
        return;
      }

      prompts.forEach(p => {
        const isRetired = p.status === "retired";
        const row = document.createElement("div");
        row.className = "row";
        row.innerHTML = `
          <div class="rowLeft">
            <p class="ideaText">
              ${escapeHtml(p.text)}
              <span class="badge">${isRetired ? "Retired" : "Active"}</span>
            </p>
            <div class="meta">Responses: ${p.count} • Auto-retire at: ${p.threshold}</div>
          </div>
          <button class="btnRetire" onclick="retirePrompt(${p.id})" ${isRetired ? "disabled" : ""}>Retire</button>
        `;
        list.appendChild(row);
      });
    }

    function retirePrompt(id){
      if(!confirm("Retire this prompt? Employees will no longer see it.")) return;

      let prompts = JSON.parse(localStorage.getItem(PROMPTS_KEY) || "[]");
      prompts = prompts.map(p => (p.id === id ? { ...p, status:"retired" } : p));
      localStorage.setItem(PROMPTS_KEY, JSON.stringify(prompts));
      renderPrompts();
    }

    // Init/make onclick work
    renderIdeas();
    renderPrompts();
    window.removeIdea = removeIdea;
    window.retirePrompt = retirePrompt;
  </script>
</body>
</html>